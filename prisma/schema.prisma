generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Teams {
  id      Int     @id @default(autoincrement())
  name    String
  logoUrl String?

  foundedYear Int?
  stadium     String?
  city        String?
  state       String?
  country     String  @default("Brasil")

  titlesTotal  Int @default(0)
  titlesLeague Int @default(0)
  titlesCup    Int @default(0)
  titlesIntl   Int @default(0)

  colors      String?
  website     String?
  socialMedia String?

  homeGames Games[] @relation("HomeTeam")
  awayGames Games[] @relation("AwayTeam")

  players Players[]
}

model Players {
  id          Int      @id @default(autoincrement())
  name        String
  position    String?
  number      Int?
  gols        Int      @default(0)
  assists     Int      @default(0)
  yellowCards Int      @default(0)
  redCards    Int      @default(0)
  lastTeams   String[] @default([])
  imageUrl    String?

  teamId Int?
  team   Teams? @relation(fields: [teamId], references: [id])

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Games {
  id   Int      @id @default(autoincrement())
  date DateTime

  homeTeamId Int
  awayTeamId Int

  homeScore Int @default(0)
  awayScore Int @default(0)

  finished Boolean @default(false)

  homeTeam Teams @relation("HomeTeam", fields: [homeTeamId], references: [id])
  awayTeam Teams @relation("AwayTeam", fields: [awayTeamId], references: [id])

  @@index([homeTeamId])
  @@index([awayTeamId])
}

model User {
  id            String    @id @default(cuid())
  name          String?
  email         String    @unique
  emailVerified DateTime?
  password      String?
  image         String?
  accounts      Account[]
  sessions      Session[]

  Authenticator Authenticator[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Account {
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String?
  access_token      String?
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String?
  session_state     String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@id([provider, providerAccountId])
}

model Session {
  sessionToken String   @unique
  userId       String
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model VerificationToken {
  identifier String
  token      String
  expires    DateTime

  @@id([identifier, token])
}

model Authenticator {
  credentialID         String  @unique
  userId               String
  providerAccountId    String
  credentialPublicKey  String
  counter              Int
  credentialDeviceType String
  credentialBackedUp   Boolean
  transports           String?

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@id([userId, credentialID])
}
